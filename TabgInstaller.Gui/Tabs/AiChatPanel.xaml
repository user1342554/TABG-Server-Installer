<UserControl x:Class="TabgInstaller.Gui.Tabs.AiChatPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <DockPanel>
        <!-- Top: Provider + credentials -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="4">
            <TextBlock Text="Provider:" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <ComboBox x:Name="ProviderCombo" Width="240" SelectionChanged="ProviderCombo_SelectionChanged">
                <ComboBoxItem Content="OpenAI (GPT-5 - Thinking)"/>
                <ComboBoxItem Content="OpenAI (GPT-5 - Chat)"/>
                <ComboBoxItem Content="Anthropic (Claude Opus 4.1)"/>
                <ComboBoxItem Content="Anthropic (Claude Sonnet 4)"/>
                <ComboBoxItem Content="xAI (Grok-4)"/>
                <ComboBoxItem Content="Gemini (2.5 Pro - Vertex)"/>
            </ComboBox>

            <TextBlock Text="  API Key/Token:" VerticalAlignment="Center" Margin="8,0,4,0"/>
            <PasswordBox x:Name="ApiKeyBox" Width="280"/>
            <Button Content="Save Key" Margin="8,0,0,0" Click="SaveKey_Click"/>



        </StackPanel>

        <!-- Bottom: Prompt + Send -->
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="4">
            <TextBlock Text="Prompt:" VerticalAlignment="Center" Margin="0,0,4,0"/>
            <TextBox x:Name="PromptBox" Width="600" Margin="0,0,8,0"/>
            <Button x:Name="SendButton" Content="Send" Width="80" Click="Send_Click"/>
            <!-- Enhanced Thinking Indicator -->
            <Border x:Name="ThinkingIndicator" Visibility="Collapsed" Background="#FFF5E6" 
                    BorderBrush="#FF8C00" BorderThickness="1" CornerRadius="12" 
                    Padding="8,4" Margin="8,0,0,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ¤–" FontSize="14" Margin="0,0,6,0" VerticalAlignment="Center"/>
                    <TextBlock Text="AI is thinking" FontWeight="SemiBold" Foreground="#FF6600" 
                               FontSize="12" VerticalAlignment="Center"/>
                    <TextBlock x:Name="ThinkingDots" Text="..." FontWeight="Bold" 
                               Foreground="#FF8C00" FontSize="14" Margin="2,0,0,0" 
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Center: Log -->
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <TextBox x:Name="ChatLog" IsReadOnly="True" TextWrapping="Wrap" AcceptsReturn="True"/>
        </ScrollViewer>
    </DockPanel>
</UserControl>


